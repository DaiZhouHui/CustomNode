<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CustomNode 节点管理</title>
    <style>
/* CustomNode 优化版样式 - 年轻化配色 */
:root {
    --primary: #6366f1;
    --primary-dark: #827ce5; /* 修改颜色 */
    --secondary: #10b981;
    --secondary-dark: #059669;
    --accent: #f59e0b;
    --accent-dark: #d97706;
    --success: #22c55e;
    --warning: #f97316;
    --danger: #ef4444;
    --danger-dark: #dc2626;
    --dark: #1e293b;
    --light: #f8fafc;
    --gray: #64748b;
    --gray-light: #e2e8f0;
    --border: #cbd5e1;
    --shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
    --radius: 12px;
    --radius-sm: 8px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', 'SF Pro Display', sans-serif;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    color: var(--dark);
    font-size: 16px;
    line-height: 1.6;
    min-height: 100vh;
    padding: 20px;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: calc(100vh - 40px);
}

/* 紧凑控制栏 */
.control-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 25px; /* 修改padding */
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    flex-wrap: wrap;
    gap: 15px;
    flex-shrink: 0;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 15px;
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 22px;
    font-weight: 700;
}

.logo i {
    color: #fbbf24;
    font-size: 24px;
}

.logo .stat-info {
    font-size: 14px;
    opacity: 0.9;
    font-weight: 500;
    margin-left: 5px;
    color: rgba(255, 255, 255, 0.9);
}

.header-right {
    display: flex;
    align-items: center;
    gap: 15px;
}

.search-box {
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 30px;
    padding: 8px 15px;
    min-width: 300px;
}

.search-box i {
    color: var(--primary);
    margin-right: 10px;
    font-size: 16px;
}

.search-input {
    border: none;
    background: transparent;
    font-size: 16px;
    width: 100%;
    outline: none;
    color: var(--dark);
}

.search-input::placeholder {
    color: var(--gray);
}

.action-buttons {
    display: flex;
    gap: 10px;
}

.btn {
    padding: 10px 18px;
    border: none;
    border-radius: 30px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.btn-primary {
    background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
    color: white;
}

.btn-secondary {
    background: linear-gradient(135deg, var(--accent), var(--accent-dark));
    color: white;
}

.btn-danger {
    background: linear-gradient(135deg, var(--danger), var(--danger-dark));
    color: white;
}

.btn-outline {
    background: transparent;
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.6);
}

.btn-outline:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
}

/* 表格容器 - 修复高度 */
.table-wrapper {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    padding: 0 10px;
}

.table-container {
    flex: 1;
    overflow-y: auto;
    position: relative;
    margin: 10px 0;
    border-radius: 8px;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

/* 节点表格 */
.nodes-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 15px;
}

.nodes-table th {
    position: sticky;
    top: 0;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    padding: 6px 20px; /* 修改padding */
    text-align: left;
    font-weight: 600;
    font-size: 16px;
    border-bottom: 3px solid var(--primary-dark);
    z-index: 10;
    white-space: nowrap;
}

.nodes-table th:first-child {
    border-top-left-radius: 8px;
}

.nodes-table th:last-child {
    border-top-right-radius: 8px;
}

.nodes-table td {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    vertical-align: middle;
    background: white;
}

.nodes-table tr:nth-child(even) td {
    background: var(--light);
}

.nodes-table tr:hover td {
    background: #f0f9ff;
    transition: background 0.2s ease;
}

/* 日期分隔行 */
.date-divider {
    background: linear-gradient(to right, #f0f9ff, #e0f2fe);
    border-top: 2px solid #c7d2fe;
    border-bottom: 2px solid #c7d2fe;
}

.date-divider td {
    padding: 12px 20px;
    font-weight: 700;
    color: var(--primary-dark);
    font-size: 16px;
    background: transparent !important;
}

.date-divider i {
    margin-right: 10px;
    color: var(--primary);
}

/* 节点名称列 - 加大加粗 */
.node-name {
    font-size: 18px;
    font-weight: 700;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 12px;
}

.node-name i {
    color: var(--primary);
    font-size: 18px;
    background: rgba(99, 102, 241, 0.1);
    padding: 8px;
    border-radius: 50%;
}

/* 时间列 - 完整时间显示 */
.node-time {
    color: var(--gray);
    font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
    font-size: 14px;
    white-space: nowrap;
    min-width: 180px;
}

/* 状态列 */
.status-badge {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    min-width: 80px;
}

.status-paired {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.1));
    color: var(--secondary-dark);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.status-node {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(130, 124, 229, 0.1));
    color: var(--primary-dark);
    border: 1px solid rgba(99, 102, 241, 0.3);
}

.status-yaml {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(217, 119, 6, 0.1));
    color: var(--accent-dark);
    border: 1px solid rgba(245, 158, 11, 0.3);
}

/* 链接按钮列 */
.link-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.link-btn {
    min-width: 90px;
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.3s ease;
    white-space: nowrap;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.link-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

.link-btn i {
    font-size: 14px;
}

.btn-pages {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
}

.btn-pages:hover {
    background: linear-gradient(135deg, var(--primary-dark), #4338ca);
}

.btn-raw {
    background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
    color: white;
}

.btn-raw:hover {
    background: linear-gradient(135deg, var(--secondary-dark), #047857);
}

/* 显示操作按钮 */
.btn-show-action {
    background: linear-gradient(135deg, #a499be, #ccb0fc);
    color: white;
    min-width: 90px;
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.3s ease;
    white-space: nowrap;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.btn-show-action:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    background: linear-gradient(135deg, #7c3aed, #6d28d9);
}

/* 删除按钮 */
.btn-delete {
    background: linear-gradient(135deg, var(--danger), var(--danger-dark));
    color: white;
    min-width: 90px;
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.3s ease;
    white-space: nowrap;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    display: none; /* 默认隐藏 */
}

.btn-delete:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    background: linear-gradient(135deg, var(--danger-dark), #b91c1c);
}

/* 操作按钮容器 */
.action-cell {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
}

/* 模态框样式 */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.modal.show {
    display: flex;
    opacity: 1;
}

.modal-content {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 500px;
    transform: translateY(-20px);
    transition: transform 0.3s ease;
}

.modal.show .modal-content {
    transform: translateY(0);
}

.modal-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--gray-light);
}

.modal-header i {
    color: var(--danger);
    font-size: 24px;
}

.modal-header h3 {
    font-size: 20px;
    font-weight: 700;
    color: var(--dark);
    margin: 0;
}

.modal-body {
    margin-bottom: 25px;
}

.modal-body p {
    color: var(--gray);
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--dark);
    font-size: 15px;
}

.form-control {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid var(--border);
    border-radius: 8px;
    font-size: 15px;
    transition: all 0.3s ease;
    background: var(--light);
}

.form-control:focus {
    outline: none;
    border-color: var(--primary);
    background: white;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.token-link {
    display: inline-block;
    margin-left: 8px;
    color: var(--primary);
    text-decoration: none;
    font-weight: 500;
    font-size: 12px;
    border-bottom: 1px dashed var(--primary);
    transition: all 0.2s;
}

.token-link:hover {
    color: var(--primary-dark);
    border-bottom-color: var(--primary-dark);
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
}

.modal-btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.modal-btn-cancel {
    background: var(--light);
    color: var(--dark);
    border: 2px solid var(--border);
}

.modal-btn-cancel:hover {
    background: var(--gray-light);
    transform: translateY(-2px);
}

.modal-btn-delete {
    background: linear-gradient(135deg, var(--danger), var(--danger-dark));
    color: white;
}

.modal-btn-delete:hover {
    background: linear-gradient(135deg, var(--danger-dark), #b91c1c);
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

/* 底部信息 - 最小化 */
.footer-info {
    padding: 12px 25px;
    background: var(--light);
    border-top: 1px solid var(--border);
    font-size: 14px;
    color: var(--gray);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
}

.footer-left {
    display: flex;
    align-items: center;
    gap: 20px;
}

.footer-right {
    display: flex;
    gap: 20px;
}

.footer-link {
    color: var(--primary);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 6px;
    font-weight: 500;
    transition: all 0.2s;
}

.footer-link:hover {
    color: var(--primary-dark);
    transform: translateY(-2px);
}

.footer-link i {
    font-size: 16px;
}

/* 复制提示 */
.toast {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: linear-gradient(135deg, var(--success), #16a34a);
    color: white;
    padding: 15px 25px;
    border-radius: 50px;
    font-size: 15px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.toast.show {
    opacity: 1;
    transform: translateY(0);
}

.toast i {
    font-size: 20px;
    color: white;
}

/* 空状态 */
.empty-state {
    padding: 60px 20px;
    text-align: center;
    color: var(--gray);
    display: none;
}

.empty-state i {
    font-size: 48px;
    margin-bottom: 20px;
    opacity: 0.5;
}

.empty-state h3 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--dark);
}

/* 响应式设计 - 手机适配 */
/* 大屏幕响应 */
@media (max-width: 1200px) {
    .container {
        max-width: 95%;
    }
    
    .nodes-table {
        font-size: 14px;
    }
    
    .node-name {
        font-size: 16px;
    }
    
    .link-btn, .btn-show-action, .btn-delete {
        min-width: 80px;
        padding: 8px 10px;
        font-size: 13px;
    }
}

/* 平板响应 - 隐藏状态列 */
@media (max-width: 992px) {
    body {
        padding: 15px;
        font-size: 15px;
    }
    
    .container {
        border-radius: 10px;
        height: calc(100vh - 30px);
    }
    
    .control-bar {
        flex-direction: column;
        align-items: stretch;
        gap: 15px;
        padding: 15px;
    }
    
    .header-left {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .header-right {
        flex-direction: column;
        width: 100%;
        gap: 10px;
    }
    
    .search-box {
        min-width: auto;
        width: 100%;
    }
    
    .action-buttons {
        width: 100%;
        justify-content: center;
    }
    
    .table-wrapper {
        padding: 0 5px;
    }
    
    .nodes-table {
        display: block;
        overflow-x: auto;
    }
    
    .nodes-table th,
    .nodes-table td {
        padding: 12px 15px;
        font-size: 14px;
    }
    
    /* 隐藏状态列 */
    .nodes-table th:nth-child(3),
    .nodes-table td:nth-child(3) {
        display: none;
    }
    
    .node-name {
        font-size: 15px;
    }
    
    .node-time {
        font-size: 13px;
        min-width: 160px;
    }
    
    .link-btn, .btn-show-action, .btn-delete {
        min-width: 70px;
        padding: 7px 9px;
        font-size: 12px;
    }
    
    .quick-btn {
        width: 36px;
        height: 36px;
    }
}

/* 中等屏幕响应 - 隐藏更新时间列 */
@media (max-width: 768px) {
    body {
        padding: 10px;
        font-size: 14px;
    }
    
    .container {
        height: calc(100vh - 20px);
    }
    
    .logo {
        font-size: 18px;
    }
    
    .logo i {
        font-size: 20px;
    }
    
    .logo .stat-info {
        font-size: 12px;
    }
    
    .btn {
        padding: 8px 14px;
        font-size: 14px;
    }
    
    .nodes-table th,
    .nodes-table td {
        padding: 10px 12px;
        font-size: 13px;
    }
    
    /* 隐藏更新时间列 */
    .nodes-table th:nth-child(2),
    .nodes-table td:nth-child(2) {
        display: none;
    }
    
    .node-name {
        font-size: 14px;
    }
    
    .link-buttons {
        flex-direction: column;
        gap: 5px;
    }
    
    .link-btn, .btn-show-action, .btn-delete {
        width: 100%;
        min-width: auto;
    }
    
    .footer-info {
        flex-direction: column;
        gap: 10px;
        text-align: center;
        padding: 10px 15px;
    }
    
    .footer-left, .footer-right {
        flex-direction: column;
        gap: 10px;
    }
    
    .toast {
        bottom: 20px;
        right: 20px;
        left: 20px;
        max-width: calc(100% - 40px);
        text-align: center;
    }
    
    .modal-content {
        padding: 20px;
        width: 95%;
    }
}

/* 小屏幕响应 - 进一步调整 */
@media (max-width: 480px) {
    body {
        padding: 5px;
        font-size: 13px;
    }
    
    .container {
        border-radius: 8px;
        height: calc(100vh - 10px);
    }
    
    .control-bar {
        padding: 12px 15px;
    }
    
    .logo {
        font-size: 16px;
    }
    
    .logo i {
        font-size: 18px;
    }
    
    .logo .stat-info {
        font-size: 11px;
    }
    
    .action-buttons {
        flex-direction: column;
        gap: 8px;
    }
    
    .btn {
        width: 100%;
        justify-content: center;
    }
    
    .nodes-table th,
    .nodes-table td {
        padding: 8px 10px;
        font-size: 12px;
    }
    
    .node-name {
        font-size: 13px;
    }
    
    .status-badge {
        padding: 4px 8px;
        font-size: 11px;
        min-width: 60px;
    }
    
    .link-btn, .btn-show-action, .btn-delete {
        padding: 6px 8px;
        font-size: 11px;
    }
    
    .date-divider td {
        font-size: 14px;
        padding: 10px 15px;
    }
    
    .modal-content {
        padding: 15px;
    }
    
    .modal-header h3 {
        font-size: 18px;
    }
    
    .modal-btn {
        padding: 10px 18px;
        font-size: 14px;
    }
}

/* 滚动条样式 */
.table-container::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.table-container::-webkit-scrollbar-track {
    background: var(--gray-light);
    border-radius: 4px;
}

.table-container::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 4px;
}

.table-container::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- 紧凑控制栏 -->
        <div class="control-bar">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-server"></i>
                    <span>CustomNode 节点仓库 <span class="stat-info">(13 节点)</span></span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" class="search-input" placeholder="搜索节点名称..." onkeyup="filterTable()">
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="copyAll('pages')">
                        <i class="fas fa-copy"></i>
                        <span>全部Pages</span>
                    </button>
                    <button class="btn btn-secondary" onclick="copyAll('raw')">
                        <i class="fas fa-copy"></i>
                        <span>全部Raw</span>
                    </button>
                    <button class="btn btn-outline" onclick="window.open('update-index.html', '_blank')">
                        <i class="fas fa-sync-alt"></i>
                        <span>更新</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 表格容器 -->
        <div class="table-wrapper">
            <div class="table-container">
                <table class="nodes-table">
                    <thead>
                        <tr>
                            <th width="20%">节点名称</th>
                            <th width="15%">更新时间</th>
                            <th width="10%">状态</th>
                            <th width="20%">节点链接</th>
                            <th width="20%">配置链接</th>
                            <th width="15%">操作</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        
        <tr class="date-divider">
            <td colspan="6">
                <i class="fas fa-calendar-day"></i>
                2026-01-17
                <span style="font-size: 12px; margin-left: 10px; color: #64748b;">
                    (3 个模组)
                </span>
            </td>
        </tr>
        
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                OptimalNode
            </div>
        </td>
        <td class="node-time">2026-01-17 00:46:02</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/OptimalNode', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/OptimalNode', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/OptimalNode.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/OptimalNode.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('OptimalNode')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                17hk
            </div>
        </td>
        <td class="node-time">2026-01-17 00:14:29</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/17hk', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17hk', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/17hk.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17hk.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('17hk')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                17kr
            </div>
        </td>
        <td class="node-time">2026-01-17 00:14:09</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/17kr', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17kr', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/17kr.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17kr.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('17kr')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
        <tr class="date-divider">
            <td colspan="6">
                <i class="fas fa-calendar-day"></i>
                2026-01-16
                <span style="font-size: 12px; margin-left: 10px; color: #64748b;">
                    (1 个模组)
                </span>
            </td>
        </tr>
        
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                0116
            </div>
        </td>
        <td class="node-time">2026-01-16 21:29:34</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/0116', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0116', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/0116.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0116.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('0116')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
        <tr class="date-divider">
            <td colspan="6">
                <i class="fas fa-calendar-day"></i>
                2026-01-15
                <span style="font-size: 12px; margin-left: 10px; color: #64748b;">
                    (2 个模组)
                </span>
            </td>
        </tr>
        
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                0115
            </div>
        </td>
        <td class="node-time">2026-01-15 12:16:39</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/0115', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0115', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/0115.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0115.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('0115')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                min35
            </div>
        </td>
        <td class="node-time">2026-01-15 11:04:04</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/min35', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/min35', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/min35.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/min35.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('min35')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
        <tr class="date-divider">
            <td colspan="6">
                <i class="fas fa-calendar-day"></i>
                2026-01-12
                <span style="font-size: 12px; margin-left: 10px; color: #64748b;">
                    (1 个模组)
                </span>
            </td>
        </tr>
        
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-layer-group"></i>
                0112
            </div>
        </td>
        <td class="node-time">2026-01-12 15:10:21</td>
        <td><span class="status-badge status-paired">已配对</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/0112', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0112', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/0112.yaml', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0112.yaml', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('0112')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
        <tr class="date-divider">
            <td colspan="6">
                <i class="fas fa-calendar-day"></i>
                2025-12-31
                <span style="font-size: 12px; margin-left: 10px; color: #64748b;">
                    (2 个模组)
                </span>
            </td>
        </tr>
        
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-file-alt"></i>
                YDSG500UP5
            </div>
        </td>
        <td class="node-time">2025-12-31 16:04:29</td>
        <td><span class="status-badge status-node">仅节点</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/YDSG500UP5', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/YDSG500UP5', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <span style='color:#94a3b8;font-size:13px;'>无配置文件</span>
                
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('YDSG500UP5')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-file-alt"></i>
                LTSG500UP38
            </div>
        </td>
        <td class="node-time">2025-12-31 16:04:11</td>
        <td><span class="status-badge status-node">仅节点</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/LTSG500UP38', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/LTSG500UP38', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <span style='color:#94a3b8;font-size:13px;'>无配置文件</span>
                
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('LTSG500UP38')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
        <tr class="date-divider">
            <td colspan="6">
                <i class="fas fa-calendar-day"></i>
                2025-12-30
                <span style="font-size: 12px; margin-left: 10px; color: #64748b;">
                    (4 个模组)
                </span>
            </td>
        </tr>
        
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-file-alt"></i>
                YdOptimal
            </div>
        </td>
        <td class="node-time">2025-12-30 19:45:34</td>
        <td><span class="status-badge status-node">仅节点</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/YdOptimal', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/YdOptimal', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <span style='color:#94a3b8;font-size:13px;'>无配置文件</span>
                
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('YdOptimal')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-file-alt"></i>
                NewOptimal
            </div>
        </td>
        <td class="node-time">2025-12-30 19:16:50</td>
        <td><span class="status-badge status-node">仅节点</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/NewOptimal', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/NewOptimal', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <span style='color:#94a3b8;font-size:13px;'>无配置文件</span>
                
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('NewOptimal')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-file-alt"></i>
                MainNode
            </div>
        </td>
        <td class="node-time">2025-12-30 06:43:00</td>
        <td><span class="status-badge status-node">仅节点</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/MainNode', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/MainNode', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <span style='color:#94a3b8;font-size:13px;'>无配置文件</span>
                
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('MainNode')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
    <tr>
        <td>
            <div class="node-name">
                <i class="fas fa-file-alt"></i>
                PlainNode
            </div>
        </td>
        <td class="node-time">2025-12-30 03:54:05</td>
        <td><span class="status-badge status-node">仅节点</span></td>
        <td>
            <div class="link-buttons">
                <button class='link-btn btn-pages' onclick="copyToClipboard('https://DaiZhouHui.github.io/CustomNode/PlainNode', this)" title='复制Pages链接'><i class='fas fa-globe'></i> Pages</button>
                <button class='link-btn btn-raw' onclick="copyToClipboard('https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/PlainNode', this)" title='复制Raw链接'><i class='fas fa-code'></i> Raw</button>
            </div>
        </td>
        <td>
            <div class="link-buttons">
                <span style='color:#94a3b8;font-size:13px;'>无配置文件</span>
                
            </div>
        </td>
        <td>
            <div class="action-cell">
                <button class="btn-show-action" onclick="toggleActionButtons(this)" title="显示/隐藏操作">
                    <i class="fas fa-eye"></i>
                    操作
                </button>
                <button class="btn-delete" onclick="openDeleteModal('PlainNode')" title="删除此节点模组">
                    <i class="fas fa-trash-alt"></i>
                    删除
                </button>
            </div>
        </td>
    </tr>
    
                    </tbody>
                </table>
                
                <div class='empty-state' id='emptyState'><i class='fas fa-inbox'></i><h3>没有找到匹配的节点</h3><p>尝试不同的搜索关键词</p></div>
            </div>
        </div>

        <!-- 底部信息 -->
        <div class="footer-info">
            <div class="footer-left">
                <span>共 13 个节点模组</span>
                <span>最后更新: 2026-01-18 21:01:48</span>
            </div>
            <div class="footer-right">
                <a href="https://github.com/DaiZhouHui/CustomNode" target="_blank" class="footer-link">
                    <i class="fab fa-github"></i>
                    <span>GitHub仓库</span>
                </a>
                <a href="update-index.html" target="_blank" class="footer-link">
                    <i class="fas fa-sync-alt"></i>
                    <span>手动更新</span>
                </a>
            </div>
        </div>
    </div>

    <!-- 删除确认模态框 -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>删除节点模组</h3>
            </div>
            <div class="modal-body">
                <p>您即将删除节点模组: <strong id="deleteNodeName"></strong></p>
                <p>此操作将永久删除节点文件及对应的配置文件，且无法恢复！</p>
                <div class="form-group">
                    <label for="githubToken">
                        <i class="fas fa-key"></i>
                        请输入 GitHub Token:
                    </label>
                    <input type="password" id="githubToken" class="form-control" 
                           placeholder="输入具有删除权限的GitHub令牌" autocomplete="off">
                    <p style="font-size: 12px; color: #94a3b8; margin-top: 5px;">
                        ⚠️ 此令牌仅用于本次删除操作，不会被保存
                        <a href="#" class="token-link" onclick="copyGitToken(); return false;">复制查看示例令牌</a>
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="modal-btn modal-btn-cancel" onclick="closeDeleteModal()">
                    <i class="fas fa-times"></i>
                    取消
                </button>
                <button type="button" class="modal-btn modal-btn-delete" onclick="confirmDelete()" id="confirmDeleteBtn">
                    <i class="fas fa-trash-alt"></i>
                    确认删除
                </button>
            </div>
        </div>
    </div>

    <!-- 复制提示 -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span class="toast-message">链接已复制到剪贴板</span>
    </div>

    <script>
        // 文件数据
        const allFiles = [{"display_name": "OptimalNode", "file_type": "node", "node_name": "OptimalNode", "yaml_name": "OptimalNode.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/OptimalNode", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/OptimalNode", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/OptimalNode.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/OptimalNode.yaml", "update_time": "2026-01-17 00:46:02+00:00", "update_date": "2026-01-17", "full_time": "2026-01-17 00:46:02", "update_time_only": "00:46:02", "node_size": 35308, "yaml_size": 56403, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "17hk", "file_type": "node", "node_name": "17hk", "yaml_name": "17hk.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/17hk", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17hk", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/17hk.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17hk.yaml", "update_time": "2026-01-17 00:14:29+00:00", "update_date": "2026-01-17", "full_time": "2026-01-17 00:14:29", "update_time_only": "00:14:29", "node_size": 22750, "yaml_size": 48651, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "17kr", "file_type": "node", "node_name": "17kr", "yaml_name": "17kr.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/17kr", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17kr", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/17kr.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/17kr.yaml", "update_time": "2026-01-17 00:14:09+00:00", "update_date": "2026-01-17", "full_time": "2026-01-17 00:14:09", "update_time_only": "00:14:09", "node_size": 4002, "yaml_size": 9360, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "0116", "file_type": "node", "node_name": "0116", "yaml_name": "0116.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/0116", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0116", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/0116.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0116.yaml", "update_time": "2026-01-16 21:29:34+00:00", "update_date": "2026-01-16", "full_time": "2026-01-16 21:29:34", "update_time_only": "21:29:34", "node_size": 2308, "yaml_size": 4609, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "0115", "file_type": "node", "node_name": "0115", "yaml_name": "0115.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/0115", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0115", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/0115.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0115.yaml", "update_time": "2026-01-15 12:16:39+00:00", "update_date": "2026-01-15", "full_time": "2026-01-15 12:16:39", "update_time_only": "12:16:39", "node_size": 11424, "yaml_size": 24878, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "min35", "file_type": "node", "node_name": "min35", "yaml_name": "min35.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/min35", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/min35", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/min35.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/min35.yaml", "update_time": "2026-01-15 11:04:04+00:00", "update_date": "2026-01-15", "full_time": "2026-01-15 11:04:04", "update_time_only": "11:04:04", "node_size": 11424, "yaml_size": 24878, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "0112", "file_type": "node", "node_name": "0112", "yaml_name": "0112.yaml", "node_pages": "https://DaiZhouHui.github.io/CustomNode/0112", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0112", "yaml_pages": "https://DaiZhouHui.github.io/CustomNode/0112.yaml", "yaml_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/0112.yaml", "update_time": "2026-01-12 15:10:21+00:00", "update_date": "2026-01-12", "full_time": "2026-01-12 15:10:21", "update_time_only": "15:10:21", "node_size": 4740, "yaml_size": 8521, "has_node": true, "has_yaml": true, "is_pair": true}, {"display_name": "YDSG500UP5", "file_type": "node", "node_name": "YDSG500UP5", "yaml_name": null, "node_pages": "https://DaiZhouHui.github.io/CustomNode/YDSG500UP5", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/YDSG500UP5", "yaml_pages": null, "yaml_raw": null, "update_time": "2025-12-31 16:04:29+00:00", "update_date": "2025-12-31", "full_time": "2025-12-31 16:04:29", "update_time_only": "16:04:29", "node_size": 1222, "yaml_size": 0, "has_node": true, "has_yaml": false, "is_pair": false}, {"display_name": "LTSG500UP38", "file_type": "node", "node_name": "LTSG500UP38", "yaml_name": null, "node_pages": "https://DaiZhouHui.github.io/CustomNode/LTSG500UP38", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/LTSG500UP38", "yaml_pages": null, "yaml_raw": null, "update_time": "2025-12-31 16:04:11+00:00", "update_date": "2025-12-31", "full_time": "2025-12-31 16:04:11", "update_time_only": "16:04:11", "node_size": 9347, "yaml_size": 0, "has_node": true, "has_yaml": false, "is_pair": false}, {"display_name": "YdOptimal", "file_type": "node", "node_name": "YdOptimal", "yaml_name": null, "node_pages": "https://DaiZhouHui.github.io/CustomNode/YdOptimal", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/YdOptimal", "yaml_pages": null, "yaml_raw": null, "update_time": "2025-12-30 19:45:34+00:00", "update_date": "2025-12-30", "full_time": "2025-12-30 19:45:34", "update_time_only": "19:45:34", "node_size": 12205, "yaml_size": 0, "has_node": true, "has_yaml": false, "is_pair": false}, {"display_name": "NewOptimal", "file_type": "node", "node_name": "NewOptimal", "yaml_name": null, "node_pages": "https://DaiZhouHui.github.io/CustomNode/NewOptimal", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/NewOptimal", "yaml_pages": null, "yaml_raw": null, "update_time": "2025-12-30 19:16:50+00:00", "update_date": "2025-12-30", "full_time": "2025-12-30 19:16:50", "update_time_only": "19:16:50", "node_size": 9238, "yaml_size": 0, "has_node": true, "has_yaml": false, "is_pair": false}, {"display_name": "MainNode", "file_type": "node", "node_name": "MainNode", "yaml_name": null, "node_pages": "https://DaiZhouHui.github.io/CustomNode/MainNode", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/MainNode", "yaml_pages": null, "yaml_raw": null, "update_time": "2025-12-30 06:43:00+00:00", "update_date": "2025-12-30", "full_time": "2025-12-30 06:43:00", "update_time_only": "06:43:00", "node_size": 26540, "yaml_size": 0, "has_node": true, "has_yaml": false, "is_pair": false}, {"display_name": "PlainNode", "file_type": "node", "node_name": "PlainNode", "yaml_name": null, "node_pages": "https://DaiZhouHui.github.io/CustomNode/PlainNode", "node_raw": "https://raw.githubusercontent.com/DaiZhouHui/CustomNode/main/PlainNode", "yaml_pages": null, "yaml_raw": null, "update_time": "2025-12-30 03:54:05+00:00", "update_date": "2025-12-30", "full_time": "2025-12-30 03:54:05", "update_time_only": "03:54:05", "node_size": 86489, "yaml_size": 0, "has_node": true, "has_yaml": false, "is_pair": false}];
        
        // 删除相关变量
        let currentDeleteNode = null;
        let currentDeleteYaml = null;
        let currentDeleteDisplayName = null;
        
        // 显示提示
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const icon = toast.querySelector('i');
            const text = toast.querySelector('.toast-message');
            
            text.textContent = message;
            
            if (type === 'error') {
                toast.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
                icon.className = 'fas fa-exclamation-circle';
            } else if (type === 'warning') {
                toast.style.background = 'linear-gradient(135deg, #f97316, #ea580c)';
                icon.className = 'fas fa-exclamation-triangle';
            } else if (type === 'info') {
                toast.style.background = 'linear-gradient(135deg, #3b82f6, #2563eb)';
                icon.className = 'fas fa-info-circle';
            } else {
                toast.style.background = 'linear-gradient(135deg, #22c55e, #16a34a)';
                icon.className = 'fas fa-check-circle';
            }
            
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // 复制到剪贴板
        function copyToClipboard(text, button = null) {
            navigator.clipboard.writeText(text)
                .then(() => {
                    showToast('链接已复制');
                    if (button) {
                        buttonEffect(button);
                    }
                })
                .catch(err => {
                    console.error('复制失败:', err);
                    fallbackCopy(text, button);
                });
        }
        
        // 降级复制方案
        function fallbackCopy(text, button = null) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showToast('链接已复制');
                if (button) {
                    buttonEffect(button);
                }
            } catch (err) {
                showToast('复制失败', 'error');
            }
            
            document.body.removeChild(textArea);
        }
        
        // 按钮效果
        function buttonEffect(button) {
            const originalText = button.innerHTML;
            const originalBackground = button.style.background;
            
            button.innerHTML = '<i class="fas fa-check"></i> 已复制';
            button.style.background = 'linear-gradient(135deg, #22c55e, #16a34a)';
            button.style.color = 'white';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = originalBackground;
                button.style.color = '';
            }, 1500);
        }
        
        // 复制示例令牌
        function copyGitToken() {
            const exampleToken = 'ghp_q914mARHjefJJ8XDKoNFauxzubjcjV0nlLt';
            copyToClipboard(exampleToken);
            showToast('示例令牌已复制到剪贴板', 'info');
            
            // 可选：将令牌填入输入框
            const tokenInput = document.getElementById('githubToken');
            if (tokenInput) {
                tokenInput.value = exampleToken;
                tokenInput.focus();
                tokenInput.select();
            }
        }
        
        // 复制节点的所有链接
        function copyNodeLinks(nodeName) {
            const file = allFiles.find(f => f.display_name === nodeName);
            if (!file) return;
            
            const links = [];
            if (file.node_pages) links.push(file.node_pages);
            if (file.node_raw) links.push(file.node_raw);
            if (file.yaml_pages) links.push(file.yaml_pages);
            if (file.yaml_raw) links.push(file.yaml_raw);
            
            if (links.length > 0) {
                copyToClipboard(links.join('\n'));
                showToast(`已复制${links.length}个链接`);
            } else {
                showToast('没有可复制的链接', 'warning');
            }
        }
        
        // 复制全部链接
        function copyAll(type) {
            const links = [];
            
            allFiles.forEach(file => {
                if (type === 'pages') {
                    if (file.node_pages) links.push(file.node_pages);
                    if (file.yaml_pages) links.push(file.yaml_pages);
                } else {
                    if (file.node_raw) links.push(file.node_raw);
                    if (file.yaml_raw) links.push(file.yaml_raw);
                }
            });
            
            if (links.length > 0) {
                copyToClipboard(links.join('\n'));
                showToast(`已复制${links.length}个${type === 'pages' ? 'Pages' : 'Raw'}链接`);
            } else {
                showToast('没有可复制的链接', 'warning');
            }
        }
        
        // 显示/隐藏操作列
        function toggleActionButtons(btn) {
            const row = btn.closest('tr');
            const deleteBtn = row.querySelector('.btn-delete');
            const showActionBtn = row.querySelector('.btn-show-action');
            
            if (deleteBtn.style.display === 'none' || deleteBtn.style.display === '') {
                // 显示删除按钮
                deleteBtn.style.display = 'flex';
                showActionBtn.innerHTML = '<i class="fas fa-eye-slash"></i> 隐藏';
                showActionBtn.style.background = 'linear-gradient(135deg, #6b7280, #4b5563)';
            } else {
                // 隐藏删除按钮
                deleteBtn.style.display = 'none';
                showActionBtn.innerHTML = '<i class="fas fa-eye"></i> 操作';
                showActionBtn.style.background = 'linear-gradient(135deg, #8b5cf6, #7c3aed)';
            }
        }
        
        // 打开删除模态框
        function openDeleteModal(nodeName) {
            const file = allFiles.find(f => f.display_name === nodeName);
            if (!file) return;
            
            currentDeleteNode = file.node_name;
            currentDeleteYaml = file.yaml_name;
            currentDeleteDisplayName = file.display_name;
            
            document.getElementById('deleteNodeName').textContent = file.display_name;
            document.getElementById('githubToken').value = '';
            document.getElementById('confirmDeleteBtn').disabled = false;
            
            const modal = document.getElementById('deleteModal');
            modal.classList.add('show');
            
            // 聚焦到输入框
            setTimeout(() => {
                document.getElementById('githubToken').focus();
            }, 300);
        }
        
        // 关闭删除模态框
        function closeDeleteModal() {
            const modal = document.getElementById('deleteModal');
            modal.classList.remove('show');
            currentDeleteNode = null;
            currentDeleteYaml = null;
            currentDeleteDisplayName = null;
        }
        
        // 确认删除
        async function confirmDelete() {
            const token = document.getElementById('githubToken').value.trim();
            
            if (!token) {
                showToast('请输入GitHub Token', 'error');
                document.getElementById('githubToken').focus();
                return;
            }
            
            const deleteBtn = document.getElementById('confirmDeleteBtn');
            const originalText = deleteBtn.innerHTML;
            deleteBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 删除中...';
            deleteBtn.disabled = true;
            
            try {
                showToast('正在删除节点文件...', 'info');
                
                // 删除节点文件（如果存在）
                if (currentDeleteNode) {
                    const nodeResult = await deleteGitHubFile(currentDeleteNode, token);
                    if (!nodeResult.success) {
                        throw new Error(`删除节点文件失败: ${nodeResult.error}`);
                    }
                }
                
                // 删除配置文件（如果存在）
                if (currentDeleteYaml) {
                    const yamlResult = await deleteGitHubFile(currentDeleteYaml, token);
                    if (!yamlResult.success) {
                        throw new Error(`删除配置文件失败: ${yamlResult.error}`);
                    }
                }
                
                showToast(`节点模组 "${currentDeleteDisplayName}" 删除成功！`, 'success');
                
                // 从表格中移除该行
                const rows = document.querySelectorAll('#tableBody tr');
                for (let row of rows) {
                    if (row.classList.contains('date-divider')) continue;
                    
                    const nameCell = row.querySelector('.node-name');
                    if (nameCell && nameCell.textContent.trim().includes(currentDeleteDisplayName)) {
                        row.remove();
                        break;
                    }
                }
                
                // 从allFiles中移除
                const index = allFiles.findIndex(f => f.display_name === currentDeleteDisplayName);
                if (index !== -1) {
                    allFiles.splice(index, 1);
                }
                
                // 更新统计信息
                updateStats();
                
                // 关闭模态框
                setTimeout(() => {
                    closeDeleteModal();
                    showToast('删除完成，建议手动更新索引', 'info');
                }, 1000);
                
            } catch (error) {
                console.error('删除失败:', error);
                showToast(`删除失败: ${error.message}`, 'error');
                deleteBtn.innerHTML = originalText;
                deleteBtn.disabled = false;
            }
        }
        
        // 删除GitHub文件
        async function deleteGitHubFile(fileName, token) {
            // 获取文件的SHA值（GitHub删除文件需要SHA）
            const getUrl = `https://api.github.com/repos/DaiZhouHui/CustomNode/contents/${fileName}`;
            
            const getResponse = await fetch(getUrl, {
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });
            
            if (!getResponse.ok) {
                // 如果文件不存在，也算删除成功
                if (getResponse.status === 404) {
                    return { success: true, message: '文件不存在或已被删除' };
                }
                const errorData = await getResponse.json();
                return { success: false, error: errorData.message || '获取文件SHA失败' };
            }
            
            const fileData = await getResponse.json();
            const sha = fileData.sha;
            
            // 删除文件
            const deleteUrl = `https://api.github.com/repos/DaiZhouHui/CustomNode/contents/${fileName}`;
            const deleteData = {
                message: `Delete ${fileName} via CustomNode Manager`,
                sha: sha,
                committer: {
                    name: 'CustomNode Manager',
                    email: 'noreply@github.com'
                }
            };
            
            const deleteResponse = await fetch(deleteUrl, {
                method: 'DELETE',
                headers: {
                    'Authorization': `token ${token}`,
                    'Content-Type': 'application/json',
                    'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify(deleteData)
            });
            
            if (!deleteResponse.ok) {
                const errorData = await deleteResponse.json();
                return { success: false, error: errorData.message || '删除文件失败' };
            }
            
            return { success: true, message: '文件删除成功' };
        }
        
        // 更新统计信息
        function updateStats() {
            const totalFiles = allFiles.length;
            const totalNodes = allFiles.filter(f => f.has_node).length;
            
            // 更新顶部统计
            const statInfo = document.querySelector('.logo .stat-info');
            if (statInfo) {
                statInfo.textContent = `(${totalNodes} 节点)`;
            }
            
            // 更新底部统计
            const footerLeft = document.querySelector('.footer-left');
            if (footerLeft && footerLeft.firstElementChild) {
                footerLeft.firstElementChild.textContent = `共 ${totalFiles} 个节点模组`;
            }
            
            // 如果没有文件，显示空状态
            const emptyState = document.getElementById('emptyState');
            if (emptyState) {
                emptyState.style.display = totalFiles === 0 ? 'block' : 'none';
            }
        }
        
        // 过滤表格
        function filterTable() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase();
            const rows = document.querySelectorAll('#tableBody tr');
            const emptyState = document.getElementById('emptyState');
            
            let visibleCount = 0;
            
            rows.forEach(row => {
                // 跳过日期分隔行
                if (row.classList.contains('date-divider')) {
                    row.style.display = '';
                    return;
                }
                
                const nodeName = row.querySelector('.node-name').textContent.toLowerCase();
                const display = nodeName.includes(searchTerm) ? '' : 'none';
                row.style.display = display;
                if (display === '') visibleCount++;
            });
            
            // 显示/隐藏空状态
            if (emptyState) {
                emptyState.style.display = visibleCount === 0 ? 'block' : 'none';
            }
        }
        
        // 键盘快捷键
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + F 聚焦搜索框
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                const searchInput = document.getElementById('searchInput');
                searchInput.focus();
                searchInput.select();
            }
            
            // Esc 清空搜索
            if (e.key === 'Escape') {
                document.getElementById('searchInput').value = '';
                filterTable();
                closeDeleteModal();
            }
            
            // Ctrl/Cmd + P 复制全部Pages
            if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                e.preventDefault();
                copyAll('pages');
            }
            
            // Ctrl/Cmd + R 复制全部Raw
            if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                e.preventDefault();
                copyAll('raw');
            }
        });
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            filterTable();
            
            // 自动调整表格容器高度
            function adjustTableHeight() {
                const container = document.querySelector('.container');
                const controlBar = document.querySelector('.control-bar');
                const footerInfo = document.querySelector('.footer-info');
                
                if (container && controlBar && footerInfo) {
                    const availableHeight = window.innerHeight - 40; // 减去body的padding
                    const usedHeight = controlBar.offsetHeight + footerInfo.offsetHeight;
                    const tableHeight = availableHeight - usedHeight - 40; // 减去一些间距
                    
                    const tableContainer = document.querySelector('.table-container');
                    if (tableContainer) {
                        tableContainer.style.maxHeight = Math.max(tableHeight, 300) + 'px';
                    }
                }
            }
            
            adjustTableHeight();
            window.addEventListener('resize', adjustTableHeight);
        });
    </script>
</body>
</html>
